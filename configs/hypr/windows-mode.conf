# Hyprland Undercover - Windows 11 Mode Configuration
# Author: John Varghese (https://github.com/John-Varghese-EH)
# Instagram: @cyber__trinity
# License: GPL-3.0
#
# This file is sourced by hyprland.conf when Windows 11 mode is active.
# It overrides default settings to create a Windows 11-like experience.

# ===== GENERAL SETTINGS =====
general {
    gaps_in = 4
    gaps_out = 8
    border_size = 1
    col.active_border = rgba(0078d4ff) rgba(00b7c3ff) 45deg
    col.inactive_border = rgba(3c3c3caa)
    layout = dwindle
    resize_on_border = true
}

# ===== DECORATION (Windows 11 Style) =====
decoration {
    rounding = 8
    
    blur {
        enabled = true
        size = 8
        passes = 2
        new_optimizations = true
        xray = false
        noise = 0.02
        contrast = 1.0
        brightness = 1.0
        vibrancy = 0.2
        vibrancy_darkness = 0.5
    }
    
    drop_shadow = true
    shadow_range = 20
    shadow_offset = 0 4
    shadow_render_power = 3
    col.shadow = rgba(00000055)
    col.shadow_inactive = rgba(00000033)
    
    dim_inactive = false
}

# ===== ANIMATIONS (Windows 11 Style) =====
animations {
    enabled = true
    
    # Windows 11-like smooth animations
    bezier = winIn, 0.1, 1.1, 0.1, 1
    bezier = winOut, 0.3, -0.3, 0, 1
    bezier = liner, 1, 1, 1, 1
    bezier = fluent, 0.15, 0.9, 0.25, 1
    bezier = fluentOut, 0.05, 0.6, 0.3, 1
    
    animation = windows, 1, 4, fluent, slide
    animation = windowsIn, 1, 4, winIn, slide
    animation = windowsOut, 1, 3, winOut, slide
    animation = windowsMove, 1, 3, fluent, slide
    animation = border, 1, 5, liner
    animation = borderangle, 1, 100, liner, loop
    animation = fade, 1, 3, fluent
    animation = workspaces, 1, 4, fluentOut, slidevert
    animation = specialWorkspace, 1, 4, fluentOut, slidefadevert -50%
}

# ===== INPUT =====
input {
    follow_mouse = 1
    sensitivity = 0
    
    touchpad {
        natural_scroll = true
        tap-to-click = true
        drag_lock = false
    }
}

gestures {
    workspace_swipe = true
    workspace_swipe_fingers = 3
    workspace_swipe_distance = 300
    workspace_swipe_cancel_ratio = 0.5
}

# ===== LAYOUTS =====
dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 2
}

master {
    new_status = master
}

# ===== MISC =====
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0
    vfr = true
    vrr = 1
    animate_manual_resizes = true
    animate_mouse_windowdragging = true
}

# ===== WINDOW RULES (Windows 11 Style) =====
# Make certain windows have Windows-like behavior
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = float, title:^(Volume Control)$
windowrulev2 = float, class:^(file-roller)$
windowrulev2 = float, class:^(thunar)$,title:^(File Operation Progress)$
windowrulev2 = float, class:^(nemo)$,title:^(.*Properties.*)$

# Rofi/Wofi windows
windowrulev2 = float, class:^(rofi)$
windowrulev2 = float, class:^(wofi)$
windowrulev2 = stayfocused, class:^(rofi)$
windowrulev2 = stayfocused, class:^(wofi)$

# ===== KEYBINDS =====
# Super key opens Start Menu (Rofi/Wofi)
# This needs to detect which launcher is installed
# bind = SUPER, SUPER_L, exec, rofi -show drun

# Alternative: Use a wrapper script that detects the launcher
bind = SUPER, SUPER_L, exec, hyprland-undercover-launcher
bind = SUPER, d, exec, hyprland-undercover-launcher

# Windows-style Alt+F4 to close window
bind = ALT, F4, killactive,

# Windows-style Super+E for file manager
bind = SUPER, e, exec, nautilus || thunar || nemo || dolphin || pcmanfm

# Windows-style Super+L for lock screen
bind = SUPER, l, exec, hyprlock || swaylock || loginctl lock-session

# Windows-style window snapping (already default in Hyprland mostly)
# Left/Right half screen
bind = SUPER, left, movewindow, l
bind = SUPER, right, movewindow, r

# Maximize toggle
bind = SUPER, up, fullscreen, 1
bind = SUPER, down, togglefloating,

# Desktop show (minimize all)
bind = SUPER, m, exec, hyprctl dispatch togglespecialworkspace magic
